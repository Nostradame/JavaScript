<!DOCTYPE html>
<html>
<head>
    <title>Локальные переменные для объекта</title>
    <script src="/scripts/5.4.js" type="text/javascript"></script>
    <style>
        [class*=result] {
            background-color: coral;
            border: black 2px solid;
        }
    </style>
</head>
<body>
    <h3>Сумма через замыкание</h3>
    <p id="closure">
        sum(1)(2) = <span class="result"></span><br />
        sum(5)(-1) = <span class="result"></span>
        <script>
            var span = document.querySelector("#closure > .result");
            var f1 = mathfun.sum();
            f1.sum(1)(2);
            span.innerText = f1.result();

            span = document.querySelectorAll("#closure > .result")[1];
            var f2 = mathfun.sum();
            f2.sum(5)(-1);
            span.innerText = f2.result();
        </script>
    </p>
    <h3>Функция - строковый буфер</h3>
    <p id="stringBuffer">
        <span class="result"></span><br />
        <span class="result"></span>
        <script>
            var buffer = mathfun.buffer();
            buffer('Замыкания');
            buffer(' Использовать');
            buffer(' Нужно!');

            var span = document.querySelector("#stringBuffer > .result");
            span.innerText = buffer();
            var buffer = mathfun.buffer();
            buffer(0);
            buffer(1);
            buffer(0);

            span = document.querySelectorAll("#stringBuffer > .result")[1];
            span.innerText = buffer();
        </script>
    </p>
    <h3>Строковый буфер с очисткой</h3>
    <p id="stringBufferClear">
        <span class="result"></span><br />
        <span class="result"></span>
        <script>
            var buffer = mathfun.buffer();
            buffer("Тест");
            buffer(" тебя не съест ");

            var span = document.querySelector("#stringBufferClear > .result");
            span.innerText = buffer();
            buffer.clear();
            span = document.querySelectorAll("#stringBufferClear > .result")[1];
            span.innerText = buffer();
        </script>
    </p>
    <h3>Сортировка</h3>
    <span id="byField">
        <span class="result"></span><br />
        <span class="result"></span>
        <script>
            var users = [
                {
                    name: "Вася",
                    surname: 'Иванов',
                    age: 20
                }, {
                    name: "Петя",
                    surname: 'Чапаев',
                    age: 25
                }, {
                    name: "Маша",
                    surname: 'Медведева',
                    age: 18
                }
            ];

            users.sort(mathfun.byField("name"));
            var span = document.querySelector("#byField > .result");
            span.innerText = users.map(function(user) {
                return user.name;
            }).toString();

            users.sort(mathfun.byField("age"));
            span = document.querySelectorAll("#byField > .result")[1];
            span.innerText = users.map(function(user) {
                return user.name;
            }).toString();
        </script>
    </span>
    <h3>Фильтрация через функцию</h3>
<span id="filterByFunction">
    <span class="result"></span><br />
    <span class="result"></span>
    <script>
        var arr = [1, 2, 3, 4, 5, 6, 7];

        var filter = mathfun.getFilter();
        var result = filter.filter(arr, filter.defaultFilters.inBetween(3, 6));
        var span = document.querySelector("#filterByFunction > .result");
        span.innerText = result.toString();

        result = filter.filter(arr, filter.defaultFilters.inArray([1, 2, 10]));
        span = document.querySelectorAll("#filterByFunction > .result")[1];
        span.innerText = result.toString();
    </script>
</span>
<h3>Армия функций</h3>
    <span id="army">
        <span class="result"></span><br />
        <span class="result"></span>
        <script>
            var army = mathfun.makeArmy();
            var span = document.querySelector("#army > .result");
            span.innerText = army[0]();
            var span = document.querySelectorAll("#army > .result")[1];
            span.innerText = army[1]();
        </script>
    </span>
</body>
</html>
