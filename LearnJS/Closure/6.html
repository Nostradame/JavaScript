<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<title>Армия функций</title>
	<meta charset="utf-8"/>
	<script>
		function makeArmy() {

			var shooters = [];

			for (var i = 0; i < 10; i++) {
				var shooter = function (idx) { // функция-стрелок
					return function () {
						alert(idx);
					} // выводит свой номер
				}

				shooters.push(shooter(i));
			}

			return shooters;
		}

		var army = makeArmy();

		army[0](); // стрелок выводит 10, а должен 0
		army[5](); // стрелок выводит 10...
		// .. все стрелки выводят 10 вместо 0,1,2...9
	</script>
</head>
<body>

</body>
</html>
